{% extends 'library/base.html' %}

{% block content %}
	{% for book in page %}
		<h2>{{book.title}}</h2>
		<p>
			<i>{{book.pub_date}}</i> | <b>Автор:</b> <a href="{% url 'author_page_url' slug=book.author.slug %}">{{book.author}}</a>
		</p>
		{% if user.is_authenticated %}
			<p>
				<a href="{% url 'edit_book_url' slug=book.slug %}" class='alert alert-warning'>Редактировать</a>
				<a href="{% url 'delete_book_url' slug=book.slug %}" class='alert alert-danger'>Удалить</a>
			</p>
		{% endif %}	
		<img src="{{book.image}}" width="250" height="350">

		<p>{{book.annotation}}</p>
		<a href="{% url 'read_book_url' slug=book.slug %}">
			<button type="button" class="btn btn-warning">читать</button>
		</a>
		<hr><br>
	{% endfor %}
{% endblock %}

{% block pagination %}
	{% if is_paginated %}
		<nav aria-label="...">
			<ul class="pagination">
				<li class="page-item {% if not prev_url %}disabled{% endif %}">
					<a class="page-link" href="{{prev_url}}" tabindex="-1">предыдущая</a>
				</li>

				{% for n in page.paginator.page_range %}
					{% if page.number == n %}
						<li class="page-item active">
							<a class="page-link" href="?page={{n}}">{{n}}<span class="sr-only">(current)</span></a>
						</li>
					{% elif n > page.number|add:-3 and n < page.number|add:3 %}
						<li class="page-item">
							<a class="page-link" href="?page={{n}}">{{n}}</a>
						</li>
					{% endif %}	
				{% endfor %}

				<li class="page-item {% if not next_url %}disabled{% endif %}">
					<a class="page-link" href="{{next_url}}" tabindex="-1">следующая</a>
				</li>
			</ul>
		</nav>
	{% endif %}	
{% endblock %}